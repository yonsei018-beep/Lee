import streamlit as st

st.set_page_config(page_title="ë‚˜ì™€ ì–´ìš¸ë¦¬ëŠ” ë„ì‹œëŠ”?", page_icon="ğŸ™ï¸")

st.title("ğŸ™ï¸ ë‚˜ì™€ ì–´ìš¸ë¦¬ëŠ” ë„ì‹œëŠ”?")
st.caption("3ê°œì˜ ì§ˆë¬¸ì— ë‹µí•˜ë©´, ë‹¹ì‹ ì˜ ë¼ì´í”„ìŠ¤íƒ€ì¼ê³¼ ì–´ìš¸ë¦¬ëŠ” ë„ì‹œë¥¼ ì°¾ì•„ë“œë ¤ìš”!")

st.divider()

# ì„ íƒì§€ -> ë„ì‹œ ì ìˆ˜ ë§¤í•‘
# ë„ì‹œ í‚¤: tokyo, newyork, paris, bali
Q1 = {
    "ë§›ìˆëŠ” ìŒì‹": "paris",
    "ìƒˆë¡œìš´ ë¬¸í™” ì²´í—˜": "tokyo",
    "ìì—°ê³¼ íœ´ì‹": "bali",
    "ì‡¼í•‘ê³¼ íŠ¸ë Œë“œ": "newyork",
}

Q2 = {
    "ê³„íší‘œëŒ€ë¡œ ì›€ì§ì¸ë‹¤": "tokyo",
    "ì¦‰í¥ì ìœ¼ë¡œ í˜ëŸ¬ê°„ë‹¤": "newyork",
    "ì—¬ìœ ë¡­ê²Œ ëŠë¦¬ê²Œ": "bali",
    "ë°”ì˜ê³  ì—ë„ˆì§€ ë„˜ì¹˜ê²Œ": "newyork",
}

Q3 = {
    "ì¡°ìš©í•œ ì¹´í˜": "paris",
    "ì‚¬ëŒ ë§ì€ ê±°ë¦¬": "newyork",
    "ìì—°ì´ ë³´ì´ëŠ” ê³³": "bali",
    "í™”ë ¤í•œ ë„ì‹¬ í•œê°€ìš´ë°": "tokyo",
}

RESULTS = {
    "tokyo": {
        "emoji": "ğŸ—¼ğŸ‡¯ğŸ‡µ",
        "name": "ë„ì¿„",
        "desc": "ì„¬ì„¸í•˜ê³  ê³„íšì ì¸ íƒ€ì…. í˜¼ìì„œë„ ì˜ ì¦ê¸°ë©° ë””í…Œì¼ì„ ì¤‘ìš”ì‹œí•´ìš”.",
    },
    "newyork": {
        "emoji": "ğŸ—½ğŸ‡ºğŸ‡¸",
        "name": "ë‰´ìš•",
        "desc": "ì—ë„ˆì§€ ë„˜ì¹˜ê³  ë„ì „ì ì¸ íƒ€ì…. ë¹ ë¥¸ ì†ë„ì™€ ìê·¹ ì†ì—ì„œ ì‚´ì•„ë‚˜ëŠ” ìŠ¤íƒ€ì¼ì´ì—ìš”!",
    },
    "paris": {
        "emoji": "ğŸ¥ğŸ‡«ğŸ‡·",
        "name": "íŒŒë¦¬",
        "desc": "ê°ì„±ì ì´ê³  ì˜ˆìˆ ì ì¸ íƒ€ì…. ë¶„ìœ„ê¸°ì™€ ì·¨í–¥, ì•„ë¦„ë‹¤ìš´ ë””í…Œì¼ì„ ì†Œì¤‘íˆ í•´ìš”.",
    },
    "bali": {
        "emoji": "ğŸŒ´ğŸ‡®ğŸ‡©",
        "name": "ë°œë¦¬",
        "desc": "íë§ê³¼ ê· í˜•ì„ ì¶”êµ¬í•˜ëŠ” íƒ€ì…. ìì—°ê³¼ ì—¬ìœ ê°€ ìˆì„ ë•Œ ê°€ì¥ ë¹›ë‚˜ìš”.",
    },
}


def pick_winner(scores: dict) -> str:
    """ìµœê³ ì  ë„ì‹œë¥¼ ì„ íƒ. ë™ì ì´ë©´ ìš°ì„ ìˆœìœ„ë¡œ ê²°ì •."""
    priority = ["tokyo", "newyork", "paris", "bali"]  # ë™ì ì¼ ë•Œ ìš°ì„ ìˆœìœ„
    max_score = max(scores.values())
    tied = [k for k, v in scores.items() if v == max_score]
    for k in priority:
        if k in tied:
            return k
    return tied[0]


# ì§ˆë¬¸ UI (radio)
a1 = st.radio("Q1. ì—¬í–‰ì„ ê°„ë‹¤ë©´ ê°€ì¥ ì¤‘ìš”í•œ ê²ƒì€?", list(Q1.keys()), index=0)
a2 = st.radio("Q2. ë‹¹ì‹ ì˜ í•˜ë£¨ ë¦¬ë“¬ì€?", list(Q2.keys()), index=0)
a3 = st.radio("Q3. ê°€ì¥ ëŒë¦¬ëŠ” ê³µê°„ì€?", list(Q3.keys()), index=0)

st.divider()

if st.button("ê²°ê³¼ ë³´ê¸°", type="primary"):
    scores = {"tokyo": 0, "newyork": 0, "paris": 0, "bali": 0}
    scores[Q1[a1]] += 1
    scores[Q2[a2]] += 1
    scores[Q3[a3]] += 1

    winner = pick_winner(scores)
    r = RESULTS[winner]

    st.subheader(f"{r['emoji']} ë‹¹ì‹ ê³¼ ì–´ìš¸ë¦¬ëŠ” ë„ì‹œëŠ” **{r['name']}**!")
    st.write(r["desc"])

    st.info(f"ê³µìœ  ë¬¸êµ¬: ë‚˜ëŠ” {r['emoji']} {r['name']} íƒ€ì…! ğŸ™ï¸âœ¨")

    with st.expander("ë‚´ ì„ íƒ ì ìˆ˜ ë³´ê¸°"):
        st.write(scores)

st.caption("Tip: `streamlit run app.py` ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆì–´ìš”.")
